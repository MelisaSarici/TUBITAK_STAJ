TUBITAK MAM INTERNSHIP DIARY
14.8.17
We have calculated the turn numbers and the model for the inductor (approx. 17 turns with etd 39) and added the
package in proteus. I have learned about the surface mount opamp and we decided to use ad8605 which has a 50uV
offset voltage (which is very low when compared to the lm348's mV level offset) we could have used op277 as well.
Tomorrow:
[] Make the arduino package in Proteus
[] Wind the inductor
[]Complete the board and send it for production
[]Look at the Arduino code and the errors


11.8.17
Today, since Mustafa Bey was not present in the office and for a correct and complete PCB design, I need his guidance
I read about the PCB design document I added in the folder in detail. The document presents very important factors.
It is vital to create the component packages that we will use here like th inductor which we will wind by hand. Since
this is required before putting the components on the PCB, I asked Gökhan Bey for inductor winding and I had another
research homework before Monday. He provided me a link in coursera of a professor in Colarado University (https://www.coursera.org/learn/electronic-converters/lecture/wnntf/inductance)
which is helpful to remind me the basic contents. ıt is refreshing but I could not complete the whole videos yet.


10.8.17
Till noon, with Mustafa Bey, we have started to draw the schematic on Protheus, I learned how to create a component
that does not exist in the library reading the datasheet and also to draw a component whose PCB drawing is existent
but not the circuit component that I learned to first draw a component and then link the PCB drawing to this.
I also solved this so-called "connection" problem. It was in the code. Now in the Classex code two diodes are turned on-off
using two different classes.

After the noon, the design on schematic is completed with an Arduino addition and voltage and current sensing circuits.
Here, TLP250 is used for gate driving. It has totem pole inside and this provides a fast turn on and off. However, the
source of the mosfet is not grounded and this creates a problem during swtiching. Therefore we connect TMA0515s flyback
converter's output to Vcc and source of the Fet. Also there is a capacitor which will provide the vcc needed when
flyback is off(?? Ask this again)

for voltage sensing at the output where battery is connected we put an rc filter and get the voltage as analog input to
arduino. Yet, this is not so easy for current reading. We will connect a resistor in series with the battery with the
acknowledgement that we do not desire the power dissipated on the resistor to be large. Therefore, approximating that
out power is around 9 W and the battery voltage will be around 3 V, Current we see will be around 3 A maximum (MPP). If
we put a boundary to this dissipated power on the resistor as 0.1 W then we will need a o.o1 ohm resistance. Taking the
voltage read from the positive side of the reisitor since the negative side is ground, we will observe a very small (30mv)
voltage at this point which will not be enough for the arduino to read. Hence, for scaling this voltage, I put a single
fed noninverting amplifier opamp.

In reality there is the problem of providing this 5 V for the arduino  and the rest o the system. It is found reasonable
to drive this voltage from the solar panel as well since using a supply when we are trying to charge one looked funny.
Therefore we will need a regulator which will supply a constant 5 V. For this smps (switch mode power supply) is found
appropriate. 78.. series (7805 is the one we will use) cuts the power cınssumption and reduce heat dis. size and weight.
If we put a linear output voltage regulator which will definetely require a heat sink. Linear means the output voltage is
constant  but the current also remains same. That is power consumotion will increase and this is not required of course.


Day 8
I switched to Arduino and read documents about AVR Microcontrollers and inquired AT32u4 datasheet in detail. Research on
interrupt conducted. Lots of information on Atler's microcontroller.Tried some sketches. But there is a connection problem
either in my computer or the Arduino Leonardo board, since the led light goes on and off from time to time.


Day 7
Up till now I was given the task to learn about the STMicrocontroller STM32F407. I am reading the presentations about the
programming also yesterday I made a research on which components can be used in the design of the board. Which parameters
affect what in DigiKey and I selected  bunch of inductors, capacitors, mosfets and diodes. Yet, I forgot to take that paper
with me today so I will add the list later and also the one which we will construct with Mustafa Abi:) By the way, I studied
on the MATLAB model I made. The model works as approximated with a ramp D however when I try to control it, it seems like
something is getting out of control:D Donno why but I do not think it matters right at the moment. I will ask whether Arduino
can be used instead of ST. This way, I may learn about it moure and this will be very helpful for the next year's project :D
Till more happen!

Day4
Perturb and Observe Method(wind and photovolataic systems Max. Power Point Tracking Control) research
Converter schematics found in the internet for control
In my design use a capacitor for stabilizng the current drawn from directly the panel since we do not want to
observe overshoots there
The converter is completed as buck converter and the values of the elements are selected. Here, in the design
an external inductor is added parallel to the battery. That is to maintain the desired output current found
in the calculations. The power output of the panel is approx. 9 W. We assume at first that the battery has 3V meaning
that it has 3 A average current. This corresponds to 6A peak value. Selecting the frequency to be used as 20kHz,
having 50Usec period, and using the 30 V input solar panel voltage vs 3V output (instantenous) voltage ratio, we can
say that 0.1 is duty ratio for the continuus-discont. edge mode. from this ratio and from the theoretical triangular
shape we can estimate the L value to be used in the converter(delI*L/delt=delV) Here also adding the voltage drop on the output
resistor ve set V as 3.4 approx.and find L around 25uH. To ensure that the converter stays inthe discont. region for
control ease later on we set L as 22uH  and at the output we use 2.2 uH with a large capacitance to diminish the
jittering voltage.(we do not want the voltage to deviate from the desired value too much.)
With these calculations, the simulations are performed and the results are included in the folder as well.
For the diode a MOSFET can also be used since it creates a large volatge drop (10-20% of the battery voltage), this
MOSFET will let the current pass through in the opposite direction which they are capable of since they are symmetrical
instead of the diode across its drain and source terminals. Owever there must be a control signal such that in case of the
decaying current having reached to 0 value, the MOSFET must switch to prevent a negative current flow which will increase
the rms current(undesired situation!)

Day3
Learned about the different materials(air, ferrite, powdered core, amorph, steel)that is used for winding the inductors.
This is important since it highly affects the frequency range of operation and we would like to operate at higher frequency for
not creating to many noise(physical to the ear), ferrite is thought as ideal for my project. Also, the frequency is important
since I want to operate in the discountinuous mode of operation in the buck-boost converter.
The overall schematic for the project is drawn, there will be a solar panel connected to a DC/DC buck-boost converter with a
control unit, this converter connected to the battery. The controller aims to keep track of the maximum power point of the panel
and also taking the batery's safety into consideration meaning that it will disconnect it if the battery is full.  An additional
part can be introduced if enough time is present. This part includes the charged battery being connected to a 5V USB charger to
charge the telephone. This part is to be done using the controller as well. I am told that the controller will be coded with C, it can
be coded with timers so that it can handle multiple tasks at the same time. This reminds me the time we used to work with Arduino to
control the motor speed:D I think this time I can learn to handle the situation.
For information on batteries: http://batteryuniversity.com/learn/article/charging_lithium_ion_batteries
                              http://www.ti.com/lit/an/snva533/snva533.pdf


Day 1-2
I have elucidated my interests on the power electronics engineering and control.
In the internship I met 3 engineers graduated from our university department.
On the common belief on the fact that high CGPA do not prefer power electronics,
I met Mr. Umut :D
Since I have an interest on power electronics control engineering focusing on
control optimization and design,we decided that I start on a project on designing
a solar panel charging control circuit starting with the background research on
gate drievers, buck and boost converters. I have been scrutinizing this subject on
Power Electornics Converters, Applications and Design Mohan's Book and Also
on the internet. I have downloaded 3 programs to familiarize with:Psim similar
to LTspice, Protheus for PCB design and Simplorer for simulation.
There is a book that I would like to mention:Grid Converters for Photovoltaic and Wind
Power Systems by Remus Teodorescu from Polytechnical University of Bucharest, marco Liserve
from Aalborg University, Denmark and Pedro Rodriguezfrom Catolonia Technical University.
The authors study in the field of designing power electronics and controllers of grid-connected contollers
on renewable energies. I liked the book very much, very encouraging indeed.
I simulated a buck and boost converter.
